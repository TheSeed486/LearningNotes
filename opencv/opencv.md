# opencv学习记录

|日期|任务|
|--|--|
|2022/12/12|[安装opencv](#安装opencv)|
|2022/12/14|[图像基本操作](#图像基本操作)|
|2022/12/16|[滚动条/键盘响应/颜色表/通道操作](#滚动条键盘响应颜色表通道操作)|

## 安装opencv

python的opencv安装比较简单，一句命令行`pip install opencv-python`就可以了，不过前提是python环境要配好，我没有按教程一样安装特定版本......甚至python版本都是最新的 ~~（已经做好踩坑的准备了）~~。

我使用的环境是WSL2+VSCode，目前没有感觉什么不适，同普通的linux区别不大，甚至更方便 ~~（什么是最好的linux发行版啊！）~~，如果有想体验的可以参考这个[Dev on Windows with WSL](https://dowww.spencerwoo.com/1-preparations/1-0-intro.html)文档，我在配置的参考了这个教程。

另外在那个测试界面好像对缩放不是支持的很好，我的浏览器缩放是120%，右边那个作答情况就有一半看不见了。

## 图像基本操作

最近考试有点多，只能抽时间来学opencv了。

这次学习加强了对图像编码的认识：图像本质是一个大数组，至于解码就交给渲染了。使用opencv对图像操作也就是对数组进行操作。以一个简单的例子如一个灰度图，~~（用灰度图是因为他结构比较简单）~~要对它某个像素进行改动，那么其实就是对应的数组值进行变动，图形的加减乘除就是也是同样的道理，感觉有点像PS的原理，不知道PS底层是不是这样实现的。

## 滚动条/键盘响应/颜色表/通道操作

滚动条是一种用于控制变量值的小部件。它通常用于图像处理程序，可以调整图像的对比度、亮度等参数。可以使用 OpenCV 中的 cv2.createTrackbar() 函数创建一个滚动条。该函数需要指定滚动条的名称、窗口名称、初始值和最大值，并返回一个整数值，该值表示当前滚动条的位置。可以使用 cv2.getTrackbarPos() 函数获取当前滚动条的位置。

可以使用 cv2.setMouseCallback() 函数响应鼠标事件。该函数需要指定窗口名称、回调函数名称和一个可选的额外参数。回调函数将在鼠标事件发生时调用，并接收四个参数：鼠标事件、鼠标指针的 x 坐标、鼠标指针的 y 坐标和额外参数。可以在回调函数内部编写代码来响应鼠标事件，例如绘制图形或打印坐标。

自带颜色表是一种预定义的颜色集合，可以用于图像处理。例如，可以使用自带颜色表来绘制彩色的直方图或标记图像中的不同部分。OpenCV 中提供了多种自带颜色表，可以使用 cv2.applyColorMap() 函数将自带颜色表应用到图像上。该函数需要指定输入图像和自带颜色表的类型，并返回一个转换后的图像。

通道分离与合并是指将图像的颜色信息拆分成单独的通道（例如红色通道、绿色通道、蓝色通道）或将多个通道合并成单个图像的过程。可以使用 cv2.split() 函数将图像的通道分离成多个单独的数组，并使用 cv2.merge() 函数将多个数组合并成单个图像。还可以使用 cv2.extractChannel() 函数提取图像的单个通道，或使用 cv2.insertChannel() 函数将单个通道插入图像中。
